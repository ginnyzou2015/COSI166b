<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class MovieData - RDoc Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  

  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>PA2.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    
    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-load_data">#load_data</a>
    
    <li ><a href="#method-i-movies">#movies</a>
    
    <li ><a href="#method-i-predict">#predict</a>
    
    <li ><a href="#method-i-rating">#rating</a>
    
    <li ><a href="#method-i-run_test">#run_test</a>
    
    <li ><a href="#method-i-similarity">#similarity</a>
    
    <li ><a href="#method-i-viewers">#viewers</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    
    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./MovieData.html">MovieData</a>
  
    <li><a href="./MovieTest.html">MovieTest</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class MovieData</h1>

  <div id="description" class="description">
    
<p>(PA) Movies Part 2, Jing Zou, 1-27-2015</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <!-- Attributes -->
    <section id="attribute-method-details" class="method-section section">
      <h3 class="section-header">Attributes</h3>

      
      <div id="attribute-i-test_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">test_data</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-training_data" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">training_data</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section><!-- attribute-method-details -->
    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>If there is one argument, u.data is read as the training set and the test
set is empty If there are two arguments, .base is read as the training set
and .test is read as the test set</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 8</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
        <span class="ruby-ivar">@training_data</span> = {}
        <span class="ruby-ivar">@test_data</span> = {}
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> 
                <span class="ruby-identifier">training_path</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">args</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.base&quot;</span>
                <span class="ruby-identifier">test_path</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">args</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;.test&quot;</span>
                <span class="ruby-identifier">load_data</span>(<span class="ruby-ivar">@test_data</span>, <span class="ruby-identifier">test_path</span>)
        <span class="ruby-keyword">else</span>
                <span class="ruby-identifier">training_path</span> = <span class="ruby-identifier">args</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">+</span> <span class="ruby-string">&quot;/u.data&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">load_data</span>(<span class="ruby-ivar">@training_data</span>, <span class="ruby-identifier">training_path</span>)
        
<span class="ruby-keyword">end</span></pre>
          </div><!-- new-source -->
          
        </div>

        

        
      </div><!-- new-method -->

    
    </section><!-- public-class-method-details -->
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-load_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_data</span><span
            class="method-args">(data, path)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It takes a path to the folder containing the movie data (ml-100k)</p>
          
          

          
          <div class="method-source-code" id="load_data-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_data</span>(<span class="ruby-identifier">data</span>, <span class="ruby-identifier">path</span>)
        <span class="ruby-identifier">file</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>)             
        <span class="ruby-identifier">file</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">one_line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">chomp</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&quot;\t&quot;</span>)
                <span class="ruby-identifier">one_line_movie_info</span> = {<span class="ruby-identifier">one_line</span>[<span class="ruby-value">1</span>] =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">one_line</span>[<span class="ruby-value">2</span>]}
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">data</span>[<span class="ruby-identifier">one_line</span>[<span class="ruby-value">0</span>]] <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
                        <span class="ruby-identifier">data</span>[<span class="ruby-identifier">one_line</span>[<span class="ruby-value">0</span>]] = <span class="ruby-identifier">one_line_movie_info</span>
                <span class="ruby-keyword">else</span>
                        <span class="ruby-identifier">data</span>[<span class="ruby-identifier">one_line</span>[<span class="ruby-value">0</span>]][<span class="ruby-identifier">one_line</span>[<span class="ruby-value">1</span>]] = <span class="ruby-identifier">one_line</span>[<span class="ruby-value">2</span>]
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- load_data-source -->
          
        </div>

        

        
      </div><!-- load_data-method -->

    
      <div id="method-i-movies" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">movies</span><span
            class="method-args">(u)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It returns the array of movies that user u has watched</p>
          
          

          
          <div class="method-source-code" id="movies-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">movies</span>(<span class="ruby-identifier">u</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-ivar">@training_data</span>[<span class="ruby-identifier">u</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">keys</span> 
<span class="ruby-keyword">end</span></pre>
          </div><!-- movies-source -->
          
        </div>

        

        
      </div><!-- movies-method -->

    
      <div id="method-i-predict" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">predict</span><span
            class="method-args">(u,m)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It returns a floating point number between 1.0 and 5.0 as an estimate of
what user u would rate movie m The returned predicted value = sum of
(simularity(u, other users)*rating of m)/sum of simularity(u, other users)
[only count the simularity that is larger than 0]</p>
          
          

          
          <div class="method-source-code" id="predict-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 85</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">predict</span>(<span class="ruby-identifier">u</span>,<span class="ruby-identifier">m</span>)
        <span class="ruby-identifier">sum_of_rating</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">sum_of_simularity</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">predicted_rating</span> = <span class="ruby-value">0</span>
        <span class="ruby-ivar">@training_data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">movie</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">u</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">movie</span>[<span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span>] <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
                        <span class="ruby-identifier">similarity</span> = <span class="ruby-identifier">similarity</span>(<span class="ruby-identifier">u</span>, <span class="ruby-identifier">user</span>)
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">similarity</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                                <span class="ruby-identifier">sum_of_rating</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">similarity</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">movie</span>[<span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">to_f</span>
                                <span class="ruby-identifier">sum_of_simularity</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">similarity</span>
                        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">sum_of_simularity</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-keyword">return</span> <span class="ruby-value">3.0</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">predicted_rating</span> = <span class="ruby-identifier">sum_of_rating</span> <span class="ruby-operator">/</span> <span class="ruby-identifier">sum_of_simularity</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">predicted_rating</span>.<span class="ruby-identifier">round</span>(<span class="ruby-value">1</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- predict-source -->
          
        </div>

        

        
      </div><!-- predict-method -->

    
      <div id="method-i-rating" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rating</span><span
            class="method-args">(u,m)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It returns the rating that user u gave movie m in the training set, and 0
if user u did not rate movie m</p>
          
          

          
          <div class="method-source-code" id="rating-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 37</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rating</span>(<span class="ruby-identifier">u</span>,<span class="ruby-identifier">m</span>)
        <span class="ruby-identifier">rating</span> = <span class="ruby-ivar">@training_data</span>[<span class="ruby-identifier">u</span>.<span class="ruby-identifier">to_s</span>][<span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">rating</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">return</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">else</span> 
                <span class="ruby-keyword">return</span> <span class="ruby-identifier">rating</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- rating-source -->
          
        </div>

        

        
      </div><!-- rating-method -->

    
      <div id="method-i-run_test" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run_test</span><span
            class="method-args">(*k)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It runs the z.predict method on the first k ratings in the test set and
returns a <a href="MovieTest.html">MovieTest</a> object containing the
results If k is omitted, all of the tests will be run</p>
          
          

          
          <div class="method-source-code" id="run_test-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run_test</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">k</span>)
        <span class="ruby-identifier">predict_data</span> = {}
        <span class="ruby-identifier">count</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">max</span> = <span class="ruby-value">20000</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> 
                <span class="ruby-identifier">max</span> = <span class="ruby-identifier">k</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_i</span>
        <span class="ruby-keyword">end</span>           
        <span class="ruby-identifier">predict_data</span> = {}
        <span class="ruby-ivar">@test_data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">movie</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">predict_movie</span> = {}
                <span class="ruby-identifier">movie</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">movie_name</span>, <span class="ruby-identifier">movie_rating</span><span class="ruby-operator">|</span>
                        <span class="ruby-keyword">if</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">max</span>
                                <span class="ruby-identifier">movie_test</span> = [<span class="ruby-identifier">movie_rating</span>, <span class="ruby-identifier">predict</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">movie_name</span>).<span class="ruby-identifier">to_s</span>]
                                <span class="ruby-identifier">predict_movie</span>[<span class="ruby-identifier">movie_name</span>] = <span class="ruby-identifier">movie_test</span>
                                <span class="ruby-identifier">count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
                <span class="ruby-identifier">predict_data</span>[<span class="ruby-identifier">user</span>] = <span class="ruby-identifier">predict_movie</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">test</span> = <span class="ruby-constant">MovieTest</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">predict_data</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">test</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- run_test-source -->
          
        </div>

        

        
      </div><!-- run_test-method -->

    
      <div id="method-i-similarity" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">similarity</span><span
            class="method-args">(user1,user2)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Similarity is defined as Pearson correlation-based similarity
sim(X,Y)=(E(XY)-E(X)E(Y))/sqrt((E(X^2)-E(X)^2)(E(Y^2)-E(Y)^2)) Pearson
correlation-based similarity ranges between +1 and −1, where 1 is total
positive correlation and −1 is total negative correlation.</p>
          
          

          
          <div class="method-source-code" id="similarity-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 48</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">similarity</span>(<span class="ruby-identifier">user1</span>,<span class="ruby-identifier">user2</span>)
        <span class="ruby-identifier">number_of_movie</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">sum_user1</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">sum_user2</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">sum_sq_user1</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">sum_sq_user2</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">product_user1_user2</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">numerator</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">denominator</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">similarity</span> = <span class="ruby-value">0</span>
        <span class="ruby-ivar">@training_data</span>[<span class="ruby-identifier">user1</span>.<span class="ruby-identifier">to_s</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">movie</span>, <span class="ruby-identifier">rating1</span><span class="ruby-operator">|</span>
                <span class="ruby-identifier">rating2</span> = <span class="ruby-identifier">training_data</span>[<span class="ruby-identifier">user2</span>.<span class="ruby-identifier">to_s</span>][<span class="ruby-identifier">movie</span>]
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">rating2</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword">nil</span>
                        <span class="ruby-identifier">number_of_movie</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                        <span class="ruby-identifier">rating1</span> = <span class="ruby-identifier">rating1</span>.<span class="ruby-identifier">to_i</span>
                        <span class="ruby-identifier">rating2</span> = <span class="ruby-identifier">rating2</span>.<span class="ruby-identifier">to_i</span>
                        <span class="ruby-identifier">sum_user1</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rating1</span>
                        <span class="ruby-identifier">sum_user2</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rating2</span>
                        <span class="ruby-identifier">sum_sq_user1</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rating1</span><span class="ruby-operator">*</span><span class="ruby-identifier">rating1</span>
                        <span class="ruby-identifier">sum_sq_user2</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rating2</span><span class="ruby-operator">*</span><span class="ruby-identifier">rating2</span>
                        <span class="ruby-identifier">product_user1_user2</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">rating1</span><span class="ruby-operator">*</span><span class="ruby-identifier">rating2</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">number_of_movie</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">numerator</span> = <span class="ruby-identifier">product_user1_user2</span><span class="ruby-operator">-</span><span class="ruby-identifier">sum_user1</span><span class="ruby-operator">*</span><span class="ruby-identifier">sum_user2</span><span class="ruby-operator">/</span><span class="ruby-identifier">number_of_movie</span>.<span class="ruby-identifier">to_f</span>
        <span class="ruby-identifier">denominator</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">sqrt</span>((<span class="ruby-identifier">sum_sq_user1</span><span class="ruby-operator">-</span><span class="ruby-identifier">sum_user1</span><span class="ruby-operator">*</span><span class="ruby-identifier">sum_user1</span><span class="ruby-operator">/</span><span class="ruby-identifier">number_of_movie</span>.<span class="ruby-identifier">to_f</span>)<span class="ruby-operator">*</span>(<span class="ruby-identifier">sum_sq_user2</span><span class="ruby-operator">-</span><span class="ruby-identifier">sum_user2</span><span class="ruby-operator">*</span><span class="ruby-identifier">sum_user2</span><span class="ruby-operator">/</span><span class="ruby-identifier">number_of_movie</span>.<span class="ruby-identifier">to_f</span>))
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">denominator</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">similarity</span> = <span class="ruby-identifier">numerator</span><span class="ruby-operator">/</span><span class="ruby-identifier">denominator</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">similarity</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- similarity-source -->
          
        </div>

        

        
      </div><!-- similarity-method -->

    
      <div id="method-i-viewers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">viewers</span><span
            class="method-args">(m)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>It returns the array of users that have seen movie m</p>
          
          

          
          <div class="method-source-code" id="viewers-source">
            <pre><span class="ruby-comment"># File PA2.rb, line 111</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">viewers</span>(<span class="ruby-identifier">m</span>)
        <span class="ruby-identifier">viewers_array</span> = []
        <span class="ruby-ivar">@training_data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span>, <span class="ruby-identifier">movie</span><span class="ruby-operator">|</span>
                <span class="ruby-keyword">if</span> <span class="ruby-identifier">movie</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span>)
                        <span class="ruby-identifier">viewers_array</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">user</span>)
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">viewers_array</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- viewers-source -->
          
        </div>

        

        
      </div><!-- viewers-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 4.0.0.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

